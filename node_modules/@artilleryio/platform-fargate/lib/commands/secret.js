/** @license
 * (c) 2021 Shoreditch Ops Ltd. All rights reserved.
 *
 * This file is part of Artillery Pro (https://artillery.io)
 *
 * NOTICE: All information contained herein is, and remains
 * the property of Shoreditch Ops Ltd. The intellectual and
 * technical concepts contained herein are proprietary to
 * Shoreditch Ops Ltd and are protected by copyright law.
 *
 * Modification and/or redistribution of this material is
 * strictly forbidden unless prior written permission is
 * obtained from Shoreditch Ops Ltd.
 *
 */
"use strict";const util=require("../util"),awsUtil=require("../aws-util"),ALLOWED_CONFIG_PARAMETERS=require("../constants")["ALLOWED_CONFIG_PARAMETERS"],setDefaultAWSCredentials=require("../utils/aws-set-default-credentials");async function set(options){var name=options.name,value=options.value;options.region||(console.log(util.formatError(new Error("A region must be specified, e.g. us-east-1"))),process.exit(1)),-1===util.supportedRegions.indexOf(options.region)&&(console.log(`Unsupported region (${options.region}) provided. Please specify one of: ${util.supportedRegions.join(", ")} `),process.exit(1)),name&&value||(console.log(util.formatError(new Error("Both name and value must be provided"))),process.exit(1));try{await setDefaultAWSCredentials();await awsUtil.putParameter("/artilleryio/"+name,value,"SecureString",options.region),console.log(`Parameter ${name} in ${options.region} has been updated`,"(encrypted)")}catch(err){console.log(util.formatError(err)),process.exit(1)}}module.exports={set:set};