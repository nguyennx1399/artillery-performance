/** @license
 * (c) 2022 Shoreditch Ops Ltd. All rights reserved.
 *
 * This file is part of Artillery Pro (https://artillery.io)
 *
 * NOTICE: All information contained herein is, and remains
 * the property of Shoreditch Ops Ltd. The intellectual and
 * technical concepts contained herein are proprietary to
 * Shoreditch Ops Ltd and are protected by copyright law.
 *
 * Modification and/or redistribution of this material is
 * strictly forbidden unless prior written permission is
 * obtained from Shoreditch Ops Ltd.
 *
 */
module.exports={getSubscription:getSubscription};const util=require("../../util"),getAccountId=require("../../util")["getAccountId"],promisify=require("util")["promisify"],debug=require("debug")("data-api:subscriptions:get-subscription"),setDefaultAWSCredentials=require("../../utils/aws-set-default-credentials");async function getSubscription(){await setDefaultAWSCredentials();var accountId=await promisify(getAccountId)(),doc=await promisify(util.getRC)(),decoded=await promisify(util.verify)(doc.token),accountId=(await promisify(util.vlk)(doc.token),{awsAccountId:accountId,planName:decoded.planName,backendRegion:doc.backendRegion,backendVersion:doc.version,licenseEmail:decoded.email,maxWorkers:decoded.mw,maxParallelTestRuns:decoded.mcr,expiresOn:decoded.sed});return doc.secondaryBackends&&(accountId.secondaryBackends=[{backendRegion:doc.secondaryBackends[0].backendRegion,version:doc.secondaryBackends[0].version}]),decoded.it&&(accountId.isTrial=!0),debug(decoded),accountId}