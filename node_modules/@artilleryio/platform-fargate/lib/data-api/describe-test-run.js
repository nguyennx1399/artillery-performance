/** @license
 * (c) 2021 Shoreditch Ops Ltd. All rights reserved.
 *
 * This file is part of Artillery Pro (https://artillery.io)
 *
 * NOTICE: All information contained herein is, and remains
 * the property of Shoreditch Ops Ltd. The intellectual and
 * technical concepts contained herein are proprietary to
 * Shoreditch Ops Ltd and are protected by copyright law.
 *
 * Modification and/or redistribution of this material is
 * strictly forbidden unless prior written permission is
 * obtained from Shoreditch Ops Ltd.
 *
 */

module.exports = { describeTestRun };

const AWS = require('aws-sdk');

const debug = require('debug')('data-api:describe-test-run');
const debugPerf = require('debug')('perf');
const createStore = require('./store');
const getBackendStore = require('../utils/get-backend-store');

async function describeTestRun(testId) {
  debugPerf('creating backend store');
  const store = createStore(await getBackendStore());
  debugPerf('got backend store config');
  await store.init();
  debugPerf('store initialized');
  const result = await store.getTestRun(testId);
  return result;
}
